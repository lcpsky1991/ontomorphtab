<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_03) on Sun Jun 15 23:26:40 PDT 2008 -->
<TITLE>
X3DLoader (Whole Brain Catalog API)
</TITLE>

<META NAME="date" CONTENT="2008-06-15">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="X3DLoader (Whole Brain Catalog API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/X3DLoader.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../edu/ucsd/ccdb/ontomorph2/util/OMTException.html" title="class in edu.ucsd.ccdb.ontomorph2.util"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../edu/ucsd/ccdb/ontomorph2/util/XSLTransformManager.html" title="class in edu.ucsd.ccdb.ontomorph2.util"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?edu/ucsd/ccdb/ontomorph2/util/X3DLoader.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="X3DLoader.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
edu.ucsd.ccdb.ontomorph2.util</FONT>
<BR>
Class X3DLoader</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../../resources/inherit.gif" ALT="extended by ">FormatConverter
      <IMG SRC="../../../../../resources/inherit.gif" ALT="extended by "><B>edu.ucsd.ccdb.ontomorph2.util.X3DLoader</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>X3DLoader</B><DT>extends FormatConverter</DL>
</PRE>

<P>
A Loader class to load models from XML-encoded X3D files (see 
 <a href="http://www.web3d.org/x3d/specifications/ISO-IEC-19775-X3DAbstractSpecification/X3D.html">this link</a> 
 for the specification) into jME.<br />
 <br />
 This Loader is designed to be able to load the geometry and lights contained 
 in an X3D file and set the necessary properties to correctly set up a model 
 for jME. It uses as many of the features of X3D as possible.<br />
 <br />
 X3D is based on the ISO standard VRML97 (see 
 <a href="http://www.web3d.org/x3d/specifications/vrml/ISO-IEC-14772-VRML97/">the ISO specification</a>), 
 which was originally created as a language for describing interactive 3D 
 scenes. The goal of X3D was to split up the VRML functionality into several 
 components (e.g. a Core Component, the Grouping Component, the Geometry3D 
 component, the Texturing component, and so on). The Components are grouped 
 into profiles, which can be used to tell the X3D browser which set of 
 components to load (e.g. the Interchange Profile, which is used for basic 
 geometry, the Immersive Profile, which supports more geometry features and 
 additionally interaction functionality, and so on).<br />
 However, this loader is NOT designed to support certain Profiles or 
 Components. Instead it tries to load all the features that can be realized 
 in jME.<br />
 <br />
 The loader currently supports the following functions and X3D Elements:
 <ul>
        <li>Grouping (<i>Group</i>, <i>StaticGroup</i>, <i>Switch</i>, 
                <i>Transform</i>) and definition of bounding boxes for groups. In 
                <i>Transform</i>, the use of the <i>center</i> and 
                <i>scaleOrientation</i> attributes is NOT supported</li>
        <li>3D solid geometry (<i>Box</i>, <i>Cone</i>, <i>Cylinder</i>, 
                <i>Sphere</i>, <i>IndexedFaceSet</i>, <i>LineSet</i>). In <i>Cylinder</i>, the 
                attributes <i>side</i>, <i>bottom</i> and <i>top</i> are currently not 
                fully supported: If either <i>bottom</i> or <i>top</i> is 
                <code>false</code>, the bottom AND top of the cylinder are removed; 
                <i>side</i> is ignored altogether.</li>
  <li>Line geometry (<i>LineSet</i>)</li>
        <li>Appearance properties (<i>Shape</i>, <i>Appearance</i>, <i>Material</i>) 
                and bounding boxes for shapes</li>
        <li>Texturing of geometry (<i>ImageTexture</i>, <i>MultiTexture</i>). The 
                use of <i>MultiTextureCoordinate</i> to specify different tex coords 
                for the textures of a <i>MultiTexture</i> is currently not supported; 
                not sure if this feature can be implemented in the future</li>
        <li>Lights (<i>DirectionalLight</i>, <i>PointLight</i> and <i>SpotLight</i>)
                </li>
 </ul>
 <br />
 The fields <i>DEF</i> and <i>USE</i> are actually supported too, but there 
 is one limitation with the USE of Objects with bump maps: The 
 BumpMapColorController attached to bumpmapped objects is not cloned by 
 CloneImportExport. When you try to re-USE a bumpmapped Appearance for a 
 different object, you can add a BumpMapColorController yourself to fix this 
 issue. 
 This also applies to the method <A HREF="../../../../../edu/ucsd/ccdb/ontomorph2/util/X3DLoader.html#convert(java.io.InputStream, java.io.OutputStream)"><CODE>convert(InputStream, OutputStream)</CODE></A>: 
 As this method uses a binary exporter to write the parsed scene to the 
 output stream, the BumpMapColorController gets lost here too, so you have to 
 set it again in order to display the bump maps properly.
 <br />
<P>

<P>
<DL>
<DT><B>Version:</B></DT>
  <DD>2007-12-18</DD>
<DT><B>Author:</B></DT>
  <DD>Michael Sattler, Stephen Larson (LineSet, some bugfixes)</DD>
</DL>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../edu/ucsd/ccdb/ontomorph2/util/X3DLoader.html#X3DLoader()">X3DLoader</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates the X3DLoader.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../edu/ucsd/ccdb/ontomorph2/util/X3DLoader.html#convert(java.io.InputStream, java.io.OutputStream)">convert</A></B>(java.io.InputStream&nbsp;in,
        java.io.OutputStream&nbsp;jmeOut)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Converts the .x3d file read from the specified InputStream to the .jme 
 format and writes it to the specified OutputStream.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;Spatial</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../edu/ucsd/ccdb/ontomorph2/util/X3DLoader.html#loadScene(java.io.InputStream, java.util.Map, LightState)">loadScene</A></B>(java.io.InputStream&nbsp;x3dIn,
          java.util.Map&lt;java.lang.String,java.io.InputStream&gt;&nbsp;texData,
          LightState&nbsp;lightState)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Loads a scene (model) from the X3D file contained in the specified input 
 stream.<br />
 <strong>Please note:</strong> This loader is NOT thread-safe!</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="X3DLoader()"><!-- --></A><H3>
X3DLoader</H3>
<PRE>
public <B>X3DLoader</B>()
          throws java.lang.InstantiationException</PRE>
<DL>
<DD>Creates the X3DLoader.
<P>
<DL>

<DT><B>Throws:</B>
<DD><CODE>java.lang.InstantiationException</CODE> - In case the XML DocumentBuilder cannot be
 instantiated</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="convert(java.io.InputStream, java.io.OutputStream)"><!-- --></A><H3>
convert</H3>
<PRE>
public void <B>convert</B>(java.io.InputStream&nbsp;in,
                    java.io.OutputStream&nbsp;jmeOut)
             throws java.io.IOException</PRE>
<DL>
<DD>Converts the .x3d file read from the specified InputStream to the .jme 
 format and writes it to the specified OutputStream. If the model 
 contains textures stored in a different folder than the model itself, 
 please specify the folder with 
 <code>setProperty("textures", new URL(folder))</code>. If you use this 
 method instead of <A HREF="../../../../../edu/ucsd/ccdb/ontomorph2/util/X3DLoader.html#loadScene(java.io.InputStream, java.util.Map, LightState)"><CODE>loadScene(InputStream, Map, LightState)</CODE></A>, any 
 lights in the scene will always be attached to a LightState at the root 
 of this scene, thus only lighting the X3D scene itself and not the scene 
 containing it.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>in</CODE> - The InputStream to read the .x3d file from<DD><CODE>jmeOut</CODE> - The OutputStream to write the .jme model to
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - If an error occurs</DL>
</DD>
</DL>
<HR>

<A NAME="loadScene(java.io.InputStream, java.util.Map, LightState)"><!-- --></A><H3>
loadScene</H3>
<PRE>
public Spatial <B>loadScene</B>(java.io.InputStream&nbsp;x3dIn,
                         java.util.Map&lt;java.lang.String,java.io.InputStream&gt;&nbsp;texData,
                         LightState&nbsp;lightState)
                  throws java.lang.Exception</PRE>
<DL>
<DD>Loads a scene (model) from the X3D file contained in the specified input 
 stream.<br />
 <strong>Please note:</strong> This loader is NOT thread-safe!
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>x3dIn</CODE> - An InputStream holding the X3D file<DD><CODE>texData</CODE> - A Map mapping the paths of texture files to InputStreams 
 holding the file content<DD><CODE>lightState</CODE> - The LightState to attach scene lights to. If 
 <code>null</code> is passed, a new LightState is created and attached to 
 the model root, which causes the lights in the X3D scene to light only 
 the X3D scene itself
<DT><B>Returns:</B><DD>The model, if it was successfully loaded, otherwise 
 <code>null</code>
<DT><B>Throws:</B>
<DD><CODE>An</CODE> - Exception, in case any error occurs
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/X3DLoader.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../edu/ucsd/ccdb/ontomorph2/util/OMTException.html" title="class in edu.ucsd.ccdb.ontomorph2.util"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../edu/ucsd/ccdb/ontomorph2/util/XSLTransformManager.html" title="class in edu.ucsd.ccdb.ontomorph2.util"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?edu/ucsd/ccdb/ontomorph2/util/X3DLoader.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="X3DLoader.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
<i>Copyright &#169; 2008 NCMIR. All Rights Reserved.</i>
</BODY>
</HTML>
